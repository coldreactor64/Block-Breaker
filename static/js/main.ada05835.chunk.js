(this["webpackJsonpbreakout-game"]=this["webpackJsonpbreakout-game"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(7),c=n.n(a),o=(n(13),n(14),n(4)),s=(n(5),function(e,t){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}});function l(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[Math.floor(Math.random()*t.length)]},f=["#4ABFF0","#F23737","#835995","#9FCE31","#FFCC00"],h=9,v=11,d=function(e){var t=e.x,n=e.y,r=e.radius;return i.a.createElement("circle",{className:"ball",cx:t,cy:n,r:r})},y=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,c=e.density,o=e.color;return i.a.createElement("g",null,i.a.createElement("rect",{className:"block",fill:o,x:t,y:n,rx:r/16,width:r-5,height:a-3}),i.a.createElement("text",{x:t+r/2-6,y:n+a/2+3,"font-size":20,class:"level"},c))},b=n(1),m=n(3),w=n(2),g=function(){function e(t,n){Object(w.a)(this,e),this.x=t,this.y=n}return Object(m.a)(e,[{key:"scaleBy",value:function(t){return new e(this.x*t,this.y*t)}},{key:"length",value:function(){return Math.hypot(this.x,this.y)}},{key:"add",value:function(t){var n=t.x,r=t.y;return new e(this.x+n,this.y+r)}},{key:"normalize",value:function(){return this.scaleBy(1/this.length())}},{key:"subtract",value:function(t){var n=t.x,r=t.y;return new e(this.x-n,this.y-r)}},{key:"dotProduct",value:function(e){var t=e.x,n=e.y;return this.x*t+this.y*n}},{key:"projectOn",value:function(t){var n=this.dotProduct(t)/t.length();return new e(n*t.x,n*t.y)}},{key:"reflect",value:function(e){return this.subtract(this.projectOn(e).scaleBy(2))}},{key:"rotate",value:function(t){var n=function(e){return e*Math.PI/180}(t),r=Math.cos(n),i=Math.sin(n);return new e(this.x*r-this.y*i,this.x*i+this.y*r)}},{key:"crossProduct",value:function(e){var t=e.x,n=e.y;return this.x*n-t*this.y}},{key:"angleBetween",value:function(e){return 180*Math.atan2(this.crossProduct(e),this.dotProduct(e))/Math.PI}}]),e}(),j=(new g(0,1),function(){function e(t,n){Object(w.a)(this,e),this.makeBlock=this.randomize(),this.density=t,this.position=new g(n,0),this.width=1,this.height=1,this.id=l(),this.color=f[Math.floor(Math.random()*f.length)]}return Object(m.a)(e,[{key:"add",value:function(e,t){this.position.add(e,t)}},{key:"randomize",value:function(){return Math.floor(1.6*Math.random())}}]),e}()),p=function(){function e(){Object(w.a)(this,e),this.levelList=[],this.currentLevel=0}return Object(m.a)(e,[{key:"addLevel",value:function(){this.currentLevel++;var e=[];this.levelList!==[]&&this.transformLevelsDown();for(var t=0;t<h;t++){var n=new j(this.currentLevel,t);0!==n.makeBlock&&e.push(n)}this.levelList.unshift(e),this.levelList=this.levelList.flat()}},{key:"transformLevelsDown",value:function(){this.levelList.forEach((function(e){var t=e.position,n=new g(t.x,t.y+1);e.position=n}))}}]),e}(),x=new g(-1,0),O=new g(1,0),E=new g(0,-1),k=new g(0,1),M=x.add(E).normalize(),N=O.add(E).normalize(),A=function e(t,n,r,i,a){Object(w.a)(this,e),this.center=new g(t,n),this.direction=r,this.radius=i,this.id=a},B=function(){function e(){Object(w.a)(this,e),this.ballsArray=[],this.markerBall=new A(h/2,v-.2,u(M,N),.2,0),this.firstBall=!1,this.isStarted=!1}return Object(m.a)(e,[{key:"reset",value:function(){this.firstBall=!1,this.isStarted=!1}},{key:"addBall",value:function(e){if(Number.isNaN(e.x)||Number.isNaN(e.y));else{var t=l();console.log(e),console.log(this.markerBall.center.x);var n=new A(this.markerBall.center.x,this.markerBall.center.y,e,.2,t);this.ballsArray.push(n),this.isStarted=!0}}},{key:"updatePhysics",value:function(e,t){var n=this;return this.ballsArray.forEach((function(r){var i=e.level,a=.01*t,c=n.ballsArray.findIndex((function(e){return e.id==r.id})),o=r.radius,s=r.direction,l=r.center.add(s.scaleBy(a)),u=l.y+o;if(u>v){!1===n.firstBall&&(n.firstBall=!0,n.markerBall=new A(r.center.x,v-.2,{x:0,y:0},.2,0));var f=n.ballsArray.filter((function(e){return e.id!=r.id}));return n.ballsArray=f}var d=function(e){n.ballsArray[c]=Object(b.a)({},r,{},e)},y=function(e){var t=s.reflect(e);return d({direction:t})},m=l.x-o,w=l.x+o,g=l.y-o;if(g<=0)return y(k);if(m<=0)return y(O);if(w>=h)return y(x);var j=i.levelList.find((function(e){var t=e.position,n=e.width,r=e.height;return R(g,u,t.y,t.y+r)&&R(m,w,t.x,t.x+n)}));if(j){if(j.density=j.density-1,j.density<=0){var p=e.level.levelList.filter((function(e){return e.id!=j.id}));e.level.levelList=p}return Object(b.a)({},y(function(){var e=j.position.y,t=e+j.height,n=j.position.x;if(g>e-o&&u<t+o){if(m<n)return x;if(w>n+j.width)return O}return g>e?k:g<=e?E:void 0}()))}return d({center:l})})),e}}]),e}(),L=function(e,t){var n=e.width/h,r=e.height/v,i=Math.min(r,n);return{projectDistance:function(e){return e*i},projectDistanceReverse:function(e){return e/i},projectVector:function(e){return e.scaleBy(i)},projectVectorReverse:function(e){return e.scaleBy(1/i)}}},R=function(e,t,n,r){return e>=n&&e<=r||t>=n&&t<=r},S={CONTAINER_SIZE_CHANGE:"CONTAINER_SIZE_CHANGE",KEY_UP:"KEY_UP",MOUSE_MOVE:"MOUSE_MOVE",TICK:"TICK"},I=function(e,t){var n=t.type,r=t.payload;switch(n){case S.CONTAINER_SIZE_CHANGE:return P(e,r);case S.KEY_UP:return D(e,r);case S.AIMING:return C(e,r);case S.MOUSE_MOVE:return _(e,r);case S.TICK:return Y(e);default:return e}},P=function(e,t){return Object(b.a)({},e,{containerSize:t},L(t))},C=function(e,t){e.isAiming=!1;for(var n=0;n<e.levelNumber-1;n++)setTimeout((function(n){e.ball.addBall(new g(Math.cos(t.angle),Math.sin(t.angle)))}),100*n);return e},_=function(e,t){return Object(b.a)({},e,{oldMousePosition:e.newMousePosition,newMousePosition:t})},D=function(e,t){return Object(b.a)({},e,{movement:void 0})},Y=function(e){if(e.isAiming)return e;var t=Date.now(),n=e.ball.updatePhysics(e,t-e.time);return n.ball.isStarted&&0===n.ball.ballsArray.length&&(n.ball.isStarted=!1,n.level.addLevel(),n.isAiming=!0,n.levelNumber++,n.ball.reset()),n=Object(b.a)({},n,{time:t}),Object(b.a)({},n)},T=function(){var e=Object(r.useRef)(),t=Object(r.useState)(),n=Object(o.a)(t,2),a=n[0],c=n[1],l=Object(r.useState)({x:0,y:0}),u=Object(o.a)(l,2),f=u[0],h=u[1],v=Object(r.useState)(!1),d=Object(o.a)(v,2),y=d[0],b=d[1];return Object(r.useEffect)((function(){var t=function(){var t=e.current.getBoundingClientRect(),n=t.width,r=t.height;c({width:n,height:r})},n=s("resize",t),r=s("mousemove",(function(e){return function(e){h({x:e.clientX,y:e.clientY})}(e)})),i=s("mousedown",(function(e){b(!0)})),a=s("mouseup",(function(e){b(!1)}));return t(),{unregisterResizeListener:n,unregisterMouseMoveListener:r,unregisterMouseDownListener:i,unregisterMouseUpListener:a}}),[]),i.a.createElement("div",{className:"page"},i.a.createElement("div",{className:"scene-container",ref:e},a&&i.a.createElement(V,{width:a.width,height:a.height,mouse:f,click:y})))},U=function(e){var t=function(){var e=new p;return e.addLevel(1),{level:e}}().level,n=new B,r=L(e);return{level:t,ball:n,containerSize:e,projectDistance:r.projectDistance,projectVector:r.projectVector,projectDistanceReverse:r.projectDistanceReverse,projectVectorReverse:r.projectVectorReverse,oldMousePosition:0,newMousePosition:0,levelNumber:2,time:Date.now(),isAiming:!0}},V=function(e){var t=Object(r.useReducer)(I,e,U),n=Object(o.a)(t,2),a=n[0],c=n[1],l=function(e,t){return c({type:e,payload:t})},u=Object(r.useRef)(),f=(Object(r.useRef)(),Object(r.useRef)()),b=Object(r.useRef)(),m=Object(r.useRef)(),w=Object(r.useRef)(),j=Object(r.useRef)(),p=Object(r.useState)({x:0,y:0}),x=Object(o.a)(p,2),O=x[0],E=x[1],k=Object(r.useState)({x:0,y:0}),M=Object(o.a)(k,2),N=M[0],A=M[1],B=a.projectDistance,L=a.projectVector,R=a.projectDistanceReverse,P=(a.projectVectorReverse,a.level,a.isAiming,B(h)),C=B(v),_=B(.2),D=(new g(e.mouse.x,e.mouse.y),R(O.x)),Y=R(O.y),T=(L(new g(D,Y)),L(a.ball.markerBall.center));Object(r.useEffect)((function(){l(S.CONTAINER_SIZE_CHANGE,{width:e.width,height:e.height}),console.log(e.width)}),[e.width,e.height]),Object(r.useEffect)((function(){e.click&&a.isAiming&&l(S.AIMING,{angle:N})}),[a.isAiming,e.click,N]),Object(r.useEffect)((function(){var e,t,n;return e="mousemove",t=function(e){return function(e){E({x:e.offsetX,y:e.offsetY});var t=Math.atan2(e.offsetY-T.y,e.offsetX-T.x);A(t),V(f.current,T.x,T.y,e.offsetX,e.offsetY),V(b.current,T.x,T.y,e.offsetX,e.offsetY),V(m.current,T.x,T.y,e.offsetX,e.offsetY),V(w.current,T.x,T.y,e.offsetX,e.offsetY),V(j.current,T.x,T.y,e.offsetX,e.offsetY)}(e)},(n=u).current.addEventListener(e,t),function(){return n.current.removeEventListener(e,t)}}),[T.x,T.y,A]);var V=function(e,t,n,r,i){var a=180*Math.atan2(i-n,r-t)/Math.PI+90;e.setAttribute("transform","translate("+t+","+n+") rotate("+a+") translate("+-t+","+-n+")")};return Object(r.useEffect)((function(){var e=setInterval((function(){return l(S.TICK)}),1e3/60),t=s("keyup",(function(e){var t=e.which;return l(S.KEY_UP,t)}));return function(){clearInterval(e),t()}}),[]),i.a.createElement("svg",{width:P,height:C,className:"scene",ref:u},a.level.levelList.map((function(e){return i.a.createElement(y,Object.assign({density:e.density,key:"".concat(e.position.x,"-").concat(e.position.y),width:B(e.width),height:B(e.height),color:e.color},L(e.position)))})),a.ball.ballsArray.map((function(e){return i.a.createElement(d,Object.assign({},L(e.center),{radius:_,key:e.id}))})),i.a.createElement(d,Object.assign({},L(a.ball.markerBall.center),{radius:_})),i.a.createElement("circle",{cx:T.x,cy:T.y-(7*_*1.15+.5*_),r:.5*_,className:"ball",ref:f}),i.a.createElement("circle",{cx:T.x,cy:T.y-(7*_*.9+.6*_),r:.6*_,className:"ball",ref:b}),i.a.createElement("circle",{cx:T.x,cy:T.y-(7*_*.65+.7*_),r:.7*_,className:"ball",ref:m}),i.a.createElement("circle",{cx:T.x,cy:T.y-(7*_*.4+.8*_),r:.8*_,className:"ball",ref:w}),i.a.createElement("circle",{cx:T.x,cy:T.y-(7*_*.15+.9*_),r:.9*_,className:"ball",ref:j}))};var z=function(){return i.a.createElement(T,null)},K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(i.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Block-Breaker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/Block-Breaker","/service-worker.js");K?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):W(t,e)}))}}()},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.ada05835.chunk.js.map